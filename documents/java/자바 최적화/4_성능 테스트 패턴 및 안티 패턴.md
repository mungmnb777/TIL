# 4. 성능 테스트 패턴 및 안티패턴

## 4.1. 성능 테스트 유형

- 지연 테스트(Latency test) → 종단 트랜잭션에 걸리는 시간은?
- 처리율 테스트(Throughput test) → 현재 시스템이 처리 가능한 동시 트랜잭션 개수는?
- 부하 테스트(Load test) → 특정 부하를 시스템이 감당할 수 있는가?
- 스트레스 테스트(Stress test) → 이 시스템의 한계점은 어디까지인가?
- 내구성 테스트(Endurance test) → 시스템을 장시간 실행할 경우 성능 이상 증상이 나타나는가?
- 용량 계획 테스트(Capacity planning test) → 리소스를 추가한 만큼 시스템이 확장되는가?
- 저하 테스트(Degradation test) → 시스템이 부분적으로 실패할 경우 어떤 일이 벌어지나?

<br>

## 4.2. 기본 베스트 프랙티스

성능 튜닝 시 주안점을 두어야 할 부분은 다음 세 가지 기본 원칙에 따라 결정된다.

- 나의 관심사가 무엇인지 식별하고 그 측정 방법을 고민한다.
- 최적화하기 용이한 부분이 아니라 중요한 부분을 최적화한다.
- 중요한 관심사를 먼저 다룬다.

### 4.2.1. 하향식 성능

자바 애플리케이션은 대규모 벤치마킹하는 일이 작은 코드 섹션별로 정확하게 수치를 얻는 것보다 쉽다.

### 4.2.2. 테스트 환경 구축

테스트 환경을 구축할 때에는 실제 물리 서버를 구입해서 테스트 환경을 구축하는 방법과 클라우드 서버를 이용하는 방법이 있다.

- 물리 서버
    - 장점 : 운영 환경과 유사한 테스트 환경을 구축하기가 수월하다
    - 단점 : 테스트를 하지 않는 경우 서버가 놀게 된다.
- 클라우드 서버
    - 장점 : 테스트를 하지 않는 경우 테스트 환경을 간편하게 꺼둘 수 있다. → 프로젝트 비용 절약
    - 단점 : 테스트 환경 구축이 어렵다.

<br>

## 4.3. 성능 안티패턴 개요

`왜 개발자는 잘못된 기술 선택을 밥 먹듯이 하나`라는 블로그에서 다섯 가지 특징을 분류했다.

- `지루함` : 지금껏 알려지지 않은 기술로 컴포넌트를 제작하는 등 여러 가지 방법으로 지루함을 표출할 때 프로젝트에 여러 가지로 해악을 끼칠 수 있다.
- `이력서 부풀리기` : 이력서를 과대 포장할 구실을 찾기 위해 프로젝트와 맞지 않는 선택을 해서 불필요한 방향으로 끌고 갈 수 있다.
- `또래 압박` : 기술을 결정할 때 관심사를 분명히 밝히지 않고, 서로 충분한 논의 없이 진행하면 좋지 않다. 특히, 신입 개발자의 경우 특정 주제를 잘 모른다는 사실을 두려워해서 사수와 제대로 소통하지 않는 경우도 있다.
- `이해 부족` : 지금 사용하는 툴의 기능도 온전히 알지 못하는데 무턱대고 새로운 툴로 문제를 해결하려고 하면 안된다.