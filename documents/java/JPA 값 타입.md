# 값 타입

## JPA의 데이터 타입 분류

JPA는 데이터 타입을 2가지로 분류한다.

- **엔티티 타입**
  - `@Entity`로 정의하는 객체
  - 데이터가 변해도 식별자를 이용해서 지속해서 추적할 수 있다.
- **값 타입**
  - int, Integer, String처럼 단순히 값으로 사용하는 자바 기본 타입이나 객체
  - 식별자가 없으므로 변경됐을 경우 추적이 불가능하다.

## 값 타입 분류

- **기본값 타입**
  - 자바 기본 타입(int, double), 래퍼 클래스(Integer, Long), String과 같은 자바에서 주로 사용되는 `primitive type`을 말한다.
  - 생명주기를 엔티티에 의존한다.
  - 값 타입은 **절대로** 공유하면 안된다. (`primitive type`은 어차피 공유되지 않으므로 상관없고 `reference type`은 공유할 수 있지만 값을 변경할 방법이 없다. 그래서 공유하더라도 변경으로 인해 부수 효과가 발생할 일은 없다. 하지만 **공유하지 않는 것을 권장**!!)
- 임베디드 타입
  - 좌표나 주소와 같은 사용자가 정의해서 쓰는 값 자체를 커스텀해서 사용하는 타입이다.
- 컬렉션 값 타입
  - 자바 컬렉션에 기본값 타입이나 임베디드 타입을 넣는 것을 말한다.

## 임베디드 타입

새로운 값 타입을 개발자가 직접 커스텀하여 정의하는 것을 JPA에서는 임베디드 타입이라고 정의한다. 또 다른 말로는 복합 값 타입이라고도 말한다.

<p align="center">
	<img src="../images/JPA 값 타입_1.png"><br>
	<em>그림 1) 임베디드 타입</em>
</p>

임베디드 타입은 재사용성이 좋고 높은 응집도를 가지고 있다.

임베디드 타입을 사용해도 실제 데이터베이스 테이블에는 임베디드 타입을 사용하지 않을 때와 똑같은 형태로 테이블을 정의한다. 이 때 만약 한 엔티티에서 같은 임베디드 타입을 사용할 경우 컬럼명이 중복되는데 `@AttributeOverrides`, `@AttributeOverride` 애노테이션을 이용해서 컬럼명 속성을 재정의할 수 있다.

## 값 타입 컬렉션

값 타입을 하나 이상 저장할 때 사용하는 방법으로 `@ElementCollection`과 `@CollectionTable` 애노테이션을 사용해서 매핑한다.

데이터베이스에서는 컬렉션을 같은 테이블에 저장할 수 없기 때문에 별도의 테이블을 따로 생성해 매핑하게 된다.
