# [이펙티브 자바 다시 시작] 아이템 13. clone 재정의는 주의해서 진행하라

날짜: 2023년 10월 20일
카테고리: java
책: effective-java

## clone 규약

- 클론은 반드시 원본과 다른 인스턴스이어야 한다.
- `getClass()`를 했을 때 같은 타입이어야 한다.
- `equals()`를 했을 때 true가 아닐 수도 있다.

## 생성자를 호출해 얻은 인스턴스를 반환해도 되는가?

- `super.clone()`이 아닌 생성자를 호출해 얻은 인스턴스를 반환해도 컴파일 에러는 발생하지 않는다.
- 하위 타입을 반환하는 메서드가 상위 타입을 반환할 수 없기 때문에 런타임 에러가 발생한다.

## 클래스가 가변 객체를 참조할 경우

- `clone()` 메서드는 얕은 복사를 한다.
    - 즉, 원본 객체의 필드와 클론 객체의 필드가 같은 값을 가지고 있다.
- 따라서 가변 객체일 경우 clone()을 재정의할 때 내부 객체를 깊은 복사로 구현해주어야 한다.