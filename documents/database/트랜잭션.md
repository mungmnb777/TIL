# 트랜잭션

날짜: 2023년 1월 12일
카테고리: database

- 데이터베이스 시스템에서 병행 제어 및 회복 작업 시 처리되는 작업의 논리적인 단위
- 논리적인 이유로 여러 SQL문들을 단일 작업으로 묶어서 나눠질 수 없게 만든 것

![Untitled](%E1%84%90%E1%85%B3%E1%84%85%E1%85%A2%E1%86%AB%E1%84%8C%E1%85%A2%E1%86%A8%E1%84%89%E1%85%A7%E1%86%AB%2046b72b90e4ef473abd110429429c5de0/Untitled.png)

### commit

보류중인 모든 데이터 변경사항을 영구적으로 적용. 현재 트랜잭션 종료

### rollback

보류중인 모든 데이터 변경사항을 폐기. 현재 트랜잭션 종료, 직전 커밋 직후의 단계로 회귀(되돌아가기)

전체 트랜잭션을 롤백함

## ACID

### Atomicity (원자성)

- all or nothing
- 트랜잭션의 연산들이 모두 성공하거나, 반대로 전부 실패되는 성질을 말한다.
- 중간에 SQL문이 실패하면 지금까지의 작업을 모두 취소하여 아무 일도 없었던 것처럼 rollback한다.
- commit 실행 시 DB에 영구적으로 저장하는 것은 DBMS가 담당
- rollback 실행 시 이전 상태로 되돌리는 것도 DBMS가 담당
- 개발자는 언제 commit과 rollback이 이루어져아하는지 담당

### Consistency (일관성)

- 데이터베이스의 상태가 일관되어야 한다는 성질이다.
- constraints, trigger 등을 통해 DB에 정의된 rules을 트랜잭션이 위반하면 rollback 해야한다.
- 개발자는 어플리케이션 관점에서 트랜잭션이 일관성있게 동작하는지 챙겨줘야한다.

### Isolation (격리성)

- 모든 트랜잭션은 다른 트랜잭션으로부터 독립되어야 한다는 뜻이다.
- 즉, 여러 트랜잭션들이 동시에 실행될 때도 혼자 실행되는 것처럼 동작하게 만듦
- DBMS는 보통 4가지의 격리 수준을 제공한다.

### Durability ****(지속성)****

- commit된 트랜잭션은 DB에 영구적으로 저장한다.
- 즉, DB 시스템에 문제가 발생해도 commit된 트랜잭션은 DB에 남아있어야 한다.
    
    → DB 시스템을 다시 재부팅하면 데이터가 남아있음(비휘발성 메모리에 저장해야 할 듯)
    
- 기본적으로 Durability는 DBMS가 보장한다.